<p><% breadcrumb :EventHome %></p>


    <h2 class="mb-4">„Ç§„Éô„É≥„ÉàÂÖ±Êúâ‰∏ÄË¶ß</h2>

    
  <div class="search_form">
  <%= search_form_for @q do |f| %>
  <div class="up-field">
  <%= f.label :title_cont, "#"%>
    <%= f.search_field :title_cont,placeholder:"„Çø„Ç§„Éà„É´Ê§úÁ¥¢" %>  <%= f.submit "üîç" %>
    </div>
    <div class="down-field">
  <%= f.label :description_cont, "#" %>
  <%= f.search_field :description_cont,placeholder:"„Éï„É™„Éº„ÉØ„Éº„ÉâÊ§úÁ¥¢" %>  <%= f.submit "üîç" %>
</div>
  <br>
<% end %>
  </div>

<div class="date_search">
  <%= form_tag events_path, method: :get do %>
  <%= select_tag :month, options_from_collection_for_select(@months, :id, :name, params[:month]), prompt: 'Êúà„ÇíÈÅ∏Êäû' %>
  <%= select_tag :day, options_from_collection_for_select(@days, :id, :name, params[:day]), prompt: 'Êó•„ÇíÈÅ∏Êäû' %>
  <%= submit_tag 'Êó•‰ªò„ÅßÊ§úÁ¥¢' %>
<% end %>
</div>


<div class="container mt-5">

<div class="tag-lists">
  <%= link_to '„Åô„Åπ„Å¶', events_path, class: "tag #{'active' if params[:tag_id].nil?}" %>
  <% Tag.all.each do |tag| %>
    <%= link_to tag.name, events_path(tag_id: tag.id), class: "tag #{'active' if params[:tag_id].to_i == tag.id}" %>
  <% end %>
</div>

<div class="events-container">
  <div class="d-flex flex-wrap">
    <% @events.each do |event| %>
      <div class="col-md-4 mb-4">
        <div class="card event-item">
                    <p>Ë°å„Åç„Åü„ÅÑ! :<span id="likes-count-<%= event.id %>"><%= event.likes_count %></span></p>

          <% if event.image.attached? %>
            <%= image_tag event.image.variant(resize: "300x200^", gravity: "center", crop: "300x200+0+0"), class: "card-img-top",alt:"No Image" %>
          <% else %>
            <div class="card-img-none " style="height: 200px;">
              <span class="text-muted">No Image</span>
            </div>
          <% end %>

            <h5 class="card-title"><%= link_to event.title, event_path(event),class:"title_text" %></h5>
          <div class="card-body">            
                <p class="card-tag"> #<%= event.tag.name %></p>
            <p class="card-text_D">[Ê¶ÇË¶Å]<br><%= auto_link(truncate(event.description, length: 100), html: { target: '_blank' }) %></p>            
            <p class="card-text_D">

              <small class="text-muted">
                [‰∏ªÂÇ¨ËÄÖ]<br>
                    <% if event.user.avatar.attached? %>
        <%= image_tag event.user.avatar.variant(resize: "50x50"), class: "user-img_index" %>
      <% else %>
              <span class="user_icon_non">No Image</span>
      <% end %>  
                
                <%= link_to event.user.name, user_path(event.user) %>
              </small>
              </p>

              <p class="card-text">
              <small class="text-muted">
                [Â†¥ÊâÄ]<br> <%= event.location %>
              </small>
            </p>
            </p>
            <p class="card-text">
              <small class="text-muted">
                [ÈñãÂÇ¨Êó•]<br> <%= event.start_time.strftime("%YÂπ¥%mÊúà%dÊó• %H:%M") %>
              </small>
            </p>
                      <% if user_signed_in? %>
                  <div class="url-preview">
        <input type="text" class="url-input" placeholder="URL„ÇíÂÖ•Âäõ">
        <button class="preview-btn">„Éó„É¨„Éì„É•„Éº</button>
      </div>
      <div class="preview-container">PreviewField</div>
      <% end %>
    
            
          </div>
        </div>
      </div>

      
    <% end %>
  </div>
 </div> 
<%= paginate @events %>
</div>