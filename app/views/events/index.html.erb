<div class="container mt-5">
  <h2 class="mb-4">イベント共有一覧</h2>

  <div>
  <%= link_to 'すべて', events_path %>
  <% Tag.all.each do |tag| %>
    <%= link_to tag.name, events_path(tag_id: tag.id) %>
  <% end %>
</div>

  <div class="d-flex flex-wrap">
    <% @events.each do |event| %>
      <div class="col-md-4 mb-4">
        <div class="card">
          <% if event.image.attached? %>
            <%= image_tag event.image.variant(resize: "300x200^", gravity: "center", crop: "300x200+0+0"), class: "card-img-top" %>
          <% else %>
            <div class="card-img-top d-flex align-items-center justify-content-center bg-light" style="height: 200px;">
              <span class="text-muted">No Image</span>
            </div>
          <% end %>
          <div class="card-body">
            <h5 class="card-title"><%= link_to event.title, event_path(event),class:"title_text" %></h5>
                <p>タグ: <%= event.tag.name %></p>
            <p class="card-text"><%= truncate(event.description, length: 100) %></p>
            <p class="card-text">
              <small class="text-muted">
                主催者: <%= link_to event.user.name, user_path(event.user) %>
              </small>
            </p>
            <p class="card-text">
              <small class="text-muted">
                開催日: <%= event.start_time.strftime("%Y年%m月%d日 %H:%M") %>
              </small>
            </p>
          </div>
        </div>
      </div>
    <% end %>
  </div>
<%= paginate @events %>
</div>